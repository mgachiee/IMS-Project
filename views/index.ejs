<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.6.0/uicons-regular-straight/css/uicons-regular-straight.css'>
  <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.6.0/uicons-regular-rounded/css/uicons-regular-rounded.css'>
  <title>Inventory Management System</title>
  <style>
    .high-z-index { 
      position: absolute; /* Or use 'position-fixed' */ 
      z-index: 1050; /* Higher value */ 
      background-color: rgba(163, 250, 134, 0.5); 
      width: 500px; 
      height: 60px; 
      top: 0; 
      right: 0;
    }
  </style>
</head>
<body>
  <% if (success) { %>
    <div id="success-alert" class="alert alert-success alert-dismissible fade show high-z-index" role="alert">
      <%= message %>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    <script>
      const alertElement = document.getElementById('success-alert');
      alertElement.addEventListener('closed.bs.alert', () => {
        window.location.href = '/items';
      });

      setTimeout(() => {
        window.location.href = '/items';
      }, 3000);
    </script>
  <% } %>
  <div class="d-flex justify-content-center">
    <%- include('partials/navbar', {user}) %>
    <div class="container">
			<div class="row justify-content-center">
				<div class="d-flex justify-content-between align-items-center  mt-5 mb-3">
					<h2 class="heading-section">List Items</h2>
          <a href="/items/add-item" class="btn btn-primary">
            Add Items
          </a>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<div class="table-wrap">
						<table class="table table-hover shadow-lg p-3 mb-5 bg-body-secondary rounded">
						  <thead class="table-dark">
						    <tr>
						      <th>#</th>
						      <th>Name</th>
						      <th>Category</th>
						      <th>Price</th>
						      <th>Actions</th>
						    </tr>
						  </thead>
						  <tbody>
                <% items.forEach((item, index) => { %>
                  <tr class="alert" role="alert">
                    <th scope="row"><%= index + 1 %></th>
                    <td><%= item.name %></td>
                    <td><%= item.category %></td>
                    <td><strong>&#8369;</strong><%= item.price %></td>
                    <td class="d-flex justify-content-around">
                      <a href="/items/<%= item._id %>" class="text-decoration-none">
                        <i class="fi fi-rs-eye text-primary"></i>
                      </a>
                      <a href="/items/<%= item._id %>/edit-item" class="text-decoration-none">
                        <i class="fi fi-rr-file-edit text-warning"></i>
                      </a>
                      <a href="/items/<%= item._id %>/delete-item" class="text-decoration-none">
                        <i class="fi fi-rs-trash text-danger"></i>
                      </a>
                    </td>
                  </tr>
                <% }) %>
						  </tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
</body>
</html>